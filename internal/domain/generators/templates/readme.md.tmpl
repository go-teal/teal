# {{ .ProjectName }}

> Generated with [Teal](https://github.com/go-teal/teal) - A Go-based ETL framework for building data pipelines

## Project Information

- **Name**: {{ .ProjectName }}
- **Module**: {{ .Module }}
- **Version**: {{ .Version }}

## Overview

This project is built using Teal, a Go-based ETL tool that generates code from SQL models, creating data pipelines with DAG-based execution.

For more information about Teal, see the [Teal README](https://github.com/go-teal/teal/blob/main/README.md).

## Database Connections

The project uses the following database connections:

{{ range .Connections }}
### {{ .Name }}
- **Type**: {{ .Type }}
{{- if .Config }}
{{- if .Config.Host }}
- **Host**: {{ .Config.Host }}
{{- end }}
{{- if .Config.Port }}
- **Port**: {{ .Config.Port }}
{{- end }}
{{- if .Config.Database }}
- **Database**: {{ .Config.Database }}
{{- end }}
{{- if .Config.Path }}
- **Path**: {{ .Config.Path }}
{{- end }}
{{- end }}
{{ end }}

## Data Models

The project contains data models organized by stages:

{{ range .Stages }}
### {{ .Name }} Stage
{{ $stageName := .Name }}
{{ range $.Assets }}
{{- if eq .Stage $stageName }}
- **{{ .ModelName }}** ({{ .ModelProfile.Materialization }})
  - Connection: `{{ .ModelProfile.Connection }}`
{{- if .Upstreams }}
  - Depends on: {{ range $i, $u := .Upstreams }}{{ if $i }}, {{ end }}`{{ $u }}`{{ end }}
{{- end }}
{{- if .Downstreams }}
  - Used by: {{ range $i, $d := .Downstreams }}{{ if $i }}, {{ end }}`{{ $d }}`{{ end }}
{{- end }}
{{- if .ModelProfile.Tests }}
  - Tests: {{ len .ModelProfile.Tests }} test(s)
{{- end }}
{{ end }}
{{- end }}
{{ end }}

## Raw Assets (Go Functions)

{{ if .RawAssets }}
The following raw assets are implemented as custom Go functions:

{{ range .RawAssets }}
- **{{ .ModelName }}**
  - Connection: `{{ .ModelProfile.Connection }}`
{{- if .Upstreams }}
  - Depends on: {{ range $i, $u := .Upstreams }}{{ if $i }}, {{ end }}`{{ $u }}`{{ end }}
{{- end }}
{{- if .Downstreams }}
  - Used by: {{ range $i, $d := .Downstreams }}{{ if $i }}, {{ end }}`{{ $d }}`{{ end }}
{{- end }}
{{ end }}
{{ else }}
No raw assets defined in this project.
{{ end }}

## Model Tree

```
{{ range .Stages }}
{{ .Name }}/
{{ $stageName := .Name }}
{{- range $.Assets }}
{{- if eq .Stage $stageName }}
├── {{ .ModelName }} [{{ .ModelProfile.Connection }}]
{{- end }}
{{- end }}
{{ end }}
```

## Building and Running

### Build the Project
```bash
make
```

### Install CLI Globally
```bash
make install
```

### Generate Assets
```bash
teal gen
```

### Run Production Binary
```bash
go run cmd/{{ .ProjectName }}/{{ .ProjectName }}.go --input-data '{"key":"value"}'
```

### Run Debug UI Binary
```bash
go run cmd/{{ .ProjectName }}-ui/{{ .ProjectName }}-ui.go
```

The debug UI will be available at `http://localhost:8080`

## Testing

Run tests with:
```bash
go test ./...
```

## Project Structure

```
.
├── assets/
│   ├── models/          # SQL model files organized by stages
│   └── tests/           # SQL test files
├── cmd/
│   ├── {{ .ProjectName }}/      # Production binary
│   └── {{ .ProjectName }}-ui/   # Debug UI binary
├── internal/
│   ├── assets/          # Generated Go code for models
│   └── model_tests/     # Generated test implementations
├── config.yaml          # Database connections
└── profile.yaml         # Project and model profiles
```

## DAG Visualization

See [graph.wsd](graph.wsd) for the PlantUML diagram of the data pipeline.

---

*This README was automatically generated by Teal*
