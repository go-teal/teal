# {{ ProjectName }}

> Generated with [Teal](https://github.com/go-teal/teal) - A Go-based ETL framework for building data pipelines

## Project Information

- **Name**: {{ ProjectName }}
- **Module**: {{ Module }}
- **Version**: {{ Version }}

## Overview

This project is built using Teal, a Go-based ETL tool that generates code from SQL models, creating data pipelines with DAG-based execution.

For more information about Teal, see the [Teal README](https://github.com/go-teal/teal/blob/main/README.md).

## Database Connections

The project uses the following database connections:
{%- for connection in Connections %}

### {{ connection.Name }}
- **Type**: {{ connection.Type }}
{%- if connection.Config -%}
{%- if connection.Config.Host %}
- **Host**: {{ connection.Config.Host }}
{%- endif -%}
{%- if connection.Config.Port %}
- **Port**: {{ connection.Config.Port }}
{%- endif -%}
{%- if connection.Config.Database %}
- **Database**: {{ connection.Config.Database }}
{%- endif -%}
{%- if connection.Config.Path %}
- **Path**: {{ connection.Config.Path }}
{%- endif -%}
{%- endif -%}
{%- endfor %}

## Data Models

The project contains data models organized by stages:
{%- for stage in Stages %}

### {{ stage.Name }} Stage
{%- set stageName = stage.Name %}
{%- for asset in Assets %}
{%- if asset.Stage == stageName %}

- **{{ asset.ModelName }}** ({{ asset.ModelProfile.Materialization }})
  - Connection: `{{ asset.ModelProfile.Connection }}`
{%- if asset.Upstreams %}
  - Depends on: {% for u in asset.Upstreams %}{% if loop.index0 > 0 %}, {% endif %}`{{ u }}`{% endfor -%}
{%- endif -%}
{%- if asset.Downstreams %}
  - Used by: {% for d in asset.Downstreams %}{% if loop.index0 > 0 %}, {% endif %}`{{ d }}`{% endfor -%}
{%- endif -%}
{%- if asset.ModelProfile.Tests %}
  - Tests: {{ asset.ModelProfile.Tests|length }} test(s)
{%- endif -%}
{%- endif %}
{%- endfor %}
{%- endfor %}

## Raw Assets (Go Functions)

{% if RawAssets -%}
The following raw assets are implemented as custom Go functions:
{%- for rawAsset in RawAssets %}

- **{{ rawAsset.ModelName }}**
  - Connection: `{{ rawAsset.ModelProfile.Connection }}`
{%- if rawAsset.Upstreams %}
  - Depends on:{% for u in rawAsset.Upstreams %}{% if u|trim %} `{{ u }}`{% if not loop.last %},{% endif %}{% endif %}{% endfor -%}
{%- endif -%}
{%- if rawAsset.Downstreams %}
  - Used by:{% for d in rawAsset.Downstreams %}{% if d|trim %} `{{ d }}`{% if not loop.last %},{% endif %}{% endif %}{% endfor -%}
{%- endif -%}
{%- endfor %}
{%- else -%}

No raw assets defined in this project.
{%- endif %}

## Model Tree

```
{%- for stage in Stages %}

{{ stage.Name }}/
{%- set stageName = stage.Name %}
{%- for asset in Assets %}
{%- if asset.Stage == stageName %}
├── {{ asset.ModelName }} [{{ asset.ModelProfile.Connection }}]
{%- endif %}
{%- endfor %}
{%- endfor %}
```

## Building and Running

### Build the Project
```bash
make
```

### Install CLI Globally
```bash
make install
```

### Generate Assets
```bash
teal gen
```

### Run Production Binary
```bash
go run cmd/{{ ProjectName }}/{{ ProjectName }}.go --input-data '{"key":"value"}'
```

### Run Debug UI Binary
```bash
go run cmd/{{ ProjectName }}-ui/{{ ProjectName }}-ui.go
```

The debug UI will be available at `http://localhost:8080`

## Testing

Run tests with:
```bash
go test ./...
```

## Project Structure

```
.
├── assets/
│   ├── models/          # SQL model files organized by stages
│   └── tests/           # SQL test files
├── cmd/
│   ├── {{ ProjectName }}/      # Production binary
│   └── {{ ProjectName }}-ui/   # Debug UI binary
├── internal/
│   ├── assets/          # Generated Go code for models
│   └── model_tests/     # Generated test implementations
├── config.yaml          # Database connections
└── profile.yaml         # Project and model profiles
```

## DAG Visualization

See [graph.wsd](graph.wsd) for the PlantUML diagram of the data pipeline.

---

*This README was automatically generated by Teal*
